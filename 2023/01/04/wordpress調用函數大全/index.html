<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>wordpress調用函數大全 | jsc的学习笔记</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="WordPress模板基本文件single.php 日志单页文件 page.php 页面文件 archvie.php 分类和日期存档页文件 searchform.php 搜索表单文件 search.php 搜索页面文件 comments.php 留言区域文件(包括留言列表和留言框) 404.php 404错误页面  header.php 网页头部文件 sidebar.php 网页侧边栏文件 foo">
<meta property="og:type" content="article">
<meta property="og:title" content="wordpress調用函數大全">
<meta property="og:url" content="http://example.com/2023/01/04/wordpress%E8%AA%BF%E7%94%A8%E5%87%BD%E6%95%B8%E5%A4%A7%E5%85%A8/index.html">
<meta property="og:site_name" content="jsc的学习笔记">
<meta property="og:description" content="WordPress模板基本文件single.php 日志单页文件 page.php 页面文件 archvie.php 分类和日期存档页文件 searchform.php 搜索表单文件 search.php 搜索页面文件 comments.php 留言区域文件(包括留言列表和留言框) 404.php 404错误页面  header.php 网页头部文件 sidebar.php 网页侧边栏文件 foo">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-01-04T06:35:46.000Z">
<meta property="article:modified_time" content="2023-01-04T07:00:02.181Z">
<meta property="article:author" content="jsc">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="jsc的学习笔记" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">jsc的学习笔记</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">持续输入、刻意练习、坚持写作</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-wordpress調用函數大全" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/01/04/wordpress%E8%AA%BF%E7%94%A8%E5%87%BD%E6%95%B8%E5%A4%A7%E5%85%A8/" class="article-date">
  <time class="dt-published" datetime="2023-01-04T06:35:46.000Z" itemprop="datePublished">2023-01-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/WordPress/">WordPress</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      wordpress調用函數大全
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="WordPress模板基本文件"><a href="#WordPress模板基本文件" class="headerlink" title="WordPress模板基本文件"></a>WordPress模板基本文件</h3><p>single.php 日志单页文件</p>
<p>page.php 页面文件</p>
<p>archvie.php 分类和日期存档页文件</p>
<p>searchform.php 搜索表单文件</p>
<p>search.php 搜索页面文件</p>
<p>comments.php 留言区域文件(包括留言列表和留言框)</p>
<p>404.php 404错误页面 </p>
<p>header.php 网页头部文件</p>
<p>sidebar.php 网页侧边栏文件</p>
<p>footer.php 网页底部文件</p>
<h3 id="WordPress-Header头部-PHP代码"><a href="#WordPress-Header头部-PHP代码" class="headerlink" title="WordPress Header头部 PHP代码"></a>WordPress Header头部 PHP代码</h3><blockquote>
<p>注: 也就是位于&lt;head&gt;和&lt;&#x2F;head&gt;之间的PHP代码</p>
</blockquote>
<p>&lt;?php bloginfo(’name’); ?&gt; 网站标题</p>
<p>&lt;?php wp_title(); ?&gt; 日志或页面标题</p>
<p>&lt;?php bloginfo(’stylesheet_url’); ?&gt; WordPress主题样式表文件style.css的相对地址</p>
<p>&lt;?php bloginfo(’pingback_url’); ?&gt; WordPress博客的Pingback地址</p>
<p>&lt;?php bloginfo(’template_url’); ?&gt; WordPress主题文件的相对地址</p>
<p>&lt;?php bloginfo(’version’); ?&gt; 博客的WordPress版本</p>
<p>&lt;?php bloginfo(’atom_url’); ?&gt; WordPress博客的Atom地址</p>
<p>&lt;?php bloginfo(’rss2_url’); ?&gt; WordPress博客的RSS2地址</p>
<p>&lt;?php bloginfo(’url’); ?&gt; WordPress博客的绝对地址</p>
<p>&lt;?php bloginfo(’name’); ?&gt; WordPress博客的名称</p>
<p>&lt;?php bloginfo(’html_type’); ?&gt; 网站的HTML版本</p>
<p>&lt;?php bloginfo(’charset’); ?&gt; 网站的字符编码格式</p>
<h3 id="WordPress-主体模板-PHP代码"><a href="#WordPress-主体模板-PHP代码" class="headerlink" title="WordPress 主体模板 PHP代码"></a>WordPress 主体模板 PHP代码</h3><p>&lt;?php the_content(); ?&gt; 日志内容</p>
<p>&lt;?php if(have_posts()) : ?&gt; 确认是否有日志</p>
<p>&lt;?php while(have_posts()) : the_post(); ?&gt; 如果有，则显示全部日志</p>
<p>&lt;?php endwhile; ?&gt; 结束PHP函数”while”</p>
<p>&lt;?php endif; ?&gt; 结束PHP函数”if”</p>
<p>&lt;?php get_header(); ?&gt; header.php文件的内容</p>
<p>&lt;?php get_sidebar(); ?&gt; sidebar.php文件的内容</p>
<p>&lt;?php get_footer(); ?&gt; footer.php文件的内容</p>
<p>&lt;?php the_time(’m-d-y’) ?&gt; 显示格式为”02-19-08″的日期</p>
<p>&lt;?php comments_popup_link(); ?&gt; 显示一篇日志的留言链接</p>
<p>&lt;?php the_title(); ?&gt; 显示一篇日志或页面的标题</p>
<p>&lt;?php the_permalink() ?&gt; 显示一篇日志或页面的永久链接&#x2F;URL地址</p>
<p>&lt;?php the_category(’, ‘) ?&gt; 显示一篇日志或页面的所属分类</p>
<p>&lt;?php the_author(); ?&gt; 显示一篇日志或页面的作者</p>
<p>&lt;?php the_ID(); ?&gt; 显示一篇日志或页面的ID</p>
<p>&lt;?php edit_post_link(); ?&gt; 显示一篇日志或页面的编辑链接</p>
<p>&lt;?php get_links_list(); ?&gt; 显示Blogroll中的链接</p>
<p>&lt;?php comments_template(); ?&gt; comments.php文件的内容</p>
<p>&lt;?php wp_list_pages(); ?&gt; 显示一份博客的页面列表</p>
<p>&lt;?php wp_list_cats(); ?&gt; 显示一份博客的分类列表</p>
<p>&lt;?php next_post_link(’ %link ‘) ?&gt; 下一篇日志的URL地址</p>
<p>&lt;?php previous_post_link(’%link’) ?&gt; 上一篇日志的URL地址</p>
<p>&lt;?php get_calendar(); ?&gt; 调用日历</p>
<p>&lt;?php wp_get_archives() ?&gt; 显示一份博客的日期存档列表</p>
<p>&lt;?php posts_nav_link(); ?&gt; 显示较新日志链接(上一页)和较旧日志链接（下一页）</p>
<p>&lt;?php bloginfo(’description’); ?&gt; 显示博客的描述信息</p>
<h3 id="其它的一些WordPress模板代码"><a href="#其它的一些WordPress模板代码" class="headerlink" title="其它的一些WordPress模板代码"></a>其它的一些WordPress模板代码</h3><p>&#x2F;%postname%&#x2F; 显示博客的自定义永久链接</p>
<p>&lt;?php the_search_query(); ?&gt; 搜索表单的值</p>
<p>&lt;?php _e(’Message’); ?&gt; 打印输出信息</p>
<p>&lt;?php wp_register(); ?&gt; 显示注册链接</p>
<p>&lt;?php wp_loginout(); ?&gt; 显示登入&#x2F;登出链接</p>
<p>&lt;!–next page–&gt; 在日志或页面中插入分页</p>
<p>&lt;!–more–&gt; 截断日志</p>
<p>&lt;?php wp_meta(); ?&gt; 显示管理员的相关控制信息</p>
<p>&lt;?php timer_stop(1); ?&gt; 显示载入页面的时间</p>
<p>&lt;?php echo get_num_queries(); ?&gt; 显示载入页面查询</p>
<h3 id="wordpress调用最新文章"><a href="#wordpress调用最新文章" class="headerlink" title="wordpress调用最新文章"></a>wordpress调用最新文章</h3><p>WordPress最新文章的调用可以使用一行很简单的模板标签wp_get_archvies来实现. 代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php get_archives(‘postbypost’, 10); ?&gt;</span><br><span class="line">(显示10篇最新更新文章)</span><br><span class="line">或者</span><br><span class="line">&lt;?php wp_get_archives(‘type=postbypost&amp;limit=20&amp;format=custom’); ?&gt;</span><br><span class="line">后面这个代码显示你博客中最新的20篇文章，其中format=custom这里主要用来自定义这份文章列表的显示样式。具体的参数和使用方法你可 以参考官方的使用说明- wp_get_archvies。(fromat=custom也可以不要，默认以UL列表显示文章标题。)</span><br></pre></td></tr></table></figure>
<p>补充: 通过WP的query_posts()函数也能调用最新文章列表， 虽然代码会比较多一点，但可以更好的控制Loop的显示，比如你可以设置是否显示摘要。具体的使用方法也可以查看官方的说明。</p>
<h3 id="wordpress调用随机文章"><a href="#wordpress调用随机文章" class="headerlink" title="wordpress调用随机文章"></a>wordpress调用随机文章</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$rand_posts = get_posts(‘numberposts=10&amp;orderby=rand’);</span><br><span class="line">foreach( $rand_posts as $post ) :</span><br><span class="line">?&gt;</span><br><span class="line">&lt;!–下面是你想自定义的Loop–&gt;</span><br><span class="line">&lt;li&gt;&lt;a href=”&lt;?php the_permalink(); ?&gt;”&gt;&lt;?php the_title(); ?&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;?php endforeach; ?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="wordpress调用最新留言"><a href="#wordpress调用最新留言" class="headerlink" title="wordpress调用最新留言"></a>wordpress调用最新留言</h3><p>下面是我之前在一个WordPress主题中代到的最新留言代码，具体也记不得是哪个主题了。该代码直接调用数据库显示一份最新留言。其中 LIMIT 10限制留言显示数量。绿色部份则是每条留言的输出样式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">global $wpdb;</span><br><span class="line">$sql = “SELECT DISTINCT ID, post_title, post_password, comment_ID,</span><br><span class="line">comment_post_ID, comment_author, comment_date_gmt, comment_approved,</span><br><span class="line">comment_type,comment_author_url,</span><br><span class="line">SUBSTRING(comment_content,1,30) AS com_excerpt</span><br><span class="line">FROM $wpdb-&gt;comments</span><br><span class="line">LEFT OUTER JOIN $wpdb-&gt;posts ON ($wpdb-&gt;comments.comment_post_ID =</span><br><span class="line">$wpdb-&gt;posts.ID)</span><br><span class="line">WHERE comment_approved = ’1′ AND comment_type = ” AND</span><br><span class="line">post_password = ”</span><br><span class="line">ORDER BY comment_date_gmt DESC</span><br><span class="line">LIMIT 10″;</span><br><span class="line">$comments = $wpdb-&gt;get_results($sql);</span><br><span class="line">$output = $pre_HTML;   foreach ($comments as $comment) &#123;</span><br><span class="line">$output .= “n&lt;li&gt;”.strip_tags($comment-&gt;comment_author)</span><br><span class="line">.”:” . ” &lt;a href=”&quot; . get_permalink($comment-&gt;ID) .</span><br><span class="line">“#comment-” . $comment-&gt;comment_ID . “” title=”on ” .</span><br><span class="line">$comment-&gt;post_title . “”&gt;” . strip_tags($comment-&gt;com_excerpt)</span><br><span class="line">.”&lt;/a&gt;&lt;/li&gt;”;</span><br><span class="line">&#125;   $output .= $post_HTML;</span><br><span class="line">echo $output;?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="wordpress调用相关文章"><a href="#wordpress调用相关文章" class="headerlink" title="wordpress调用相关文章"></a>wordpress调用相关文章</h3><p>在文章页显示相关文章</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$tags = wp_get_post_tags($post-&gt;ID);</span><br><span class="line"></span><br><span class="line">if ($tags) &#123;</span><br><span class="line"></span><br><span class="line">$first_tag = $tags[0]-&gt;term_id;</span><br><span class="line"></span><br><span class="line">$args=array(</span><br><span class="line"></span><br><span class="line">‘tag__in’ =&gt; array($first_tag),</span><br><span class="line"></span><br><span class="line">‘post__not_in’ =&gt; array($post-&gt;ID),</span><br><span class="line"></span><br><span class="line">‘showposts’=&gt;10,</span><br><span class="line"></span><br><span class="line">‘caller_get_posts’=&gt;1</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">$my_query = new WP_Query($args);</span><br><span class="line"></span><br><span class="line">if( $my_query-&gt;have_posts() ) &#123;</span><br><span class="line"></span><br><span class="line">while ($my_query-&gt;have_posts()) : $my_query-&gt;the_post(); ?&gt;</span><br><span class="line"></span><br><span class="line">&lt;li&gt;&lt;a href=”&lt;?php the_permalink() ?&gt;” rel=”bookmark” title=”&lt;?php the_title_attribute(); ?&gt;”&gt;&lt;?php the_title();?&gt; &lt;?php comments_number(‘ ‘,’(1)’,&#x27;(%)’); ?&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">endwhile;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wp_reset_query();</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="wordpress调用指定分类的文章"><a href="#wordpress调用指定分类的文章" class="headerlink" title="wordpress调用指定分类的文章"></a>wordpress调用指定分类的文章</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php $posts = get_posts( “category=4&amp;numberposts=10″ ); ?&gt;</span><br><span class="line">&lt;?php if( $posts ) : ?&gt;</span><br><span class="line">&lt;ul&gt;&lt;?php foreach( $posts as $post ) : setup_postdata( $post ); ?&gt;</span><br><span class="line">&lt;li&gt;</span><br><span class="line">&lt;a href=”&lt;?php the_permalink() ?&gt;” rel=”bookmark” title=”&lt;?php the_title(); ?&gt;”&gt;&lt;?php the_title(); ?&gt;&lt;/a&gt;</span><br><span class="line">&lt;/li&gt;</span><br><span class="line">&lt;?php endforeach; ?&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;?php endif; ?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="wordpress去评论者链接的评论输出"><a href="#wordpress去评论者链接的评论输出" class="headerlink" title="wordpress去评论者链接的评论输出"></a>wordpress去评论者链接的评论输出</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php $posts = get_posts( “category=4&amp;numberposts=10″ ); ?&gt;</span><br><span class="line">&lt;?php if( $posts ) : ?&gt;</span><br><span class="line">&lt;ul&gt;&lt;?php foreach( $posts as $post ) : setup_postdata( $post ); ?&gt;</span><br><span class="line">&lt;li&gt;</span><br><span class="line">&lt;a href=”&lt;?php the_permalink() ?&gt;” rel=”bookmark” title=”&lt;?php the_title(); ?&gt;”&gt;&lt;?php the_title(); ?&gt;&lt;/a&gt;</span><br><span class="line">&lt;/li&gt;</span><br><span class="line">&lt;?php endforeach; ?&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;?php endif; ?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="wordpress去评论者链接的评论输出-1"><a href="#wordpress去评论者链接的评论输出-1" class="headerlink" title="wordpress去评论者链接的评论输出"></a>wordpress去评论者链接的评论输出</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">global $wpdb;</span><br><span class="line"></span><br><span class="line">$sql = “SELECT DISTINCT ID, post_title, post_password, comment_ID,</span><br><span class="line"></span><br><span class="line">comment_post_ID, comment_author, comment_date_gmt, comment_approved,</span><br><span class="line"></span><br><span class="line">comment_type,comment_author_url,</span><br><span class="line"></span><br><span class="line">SUBSTRING(comment_content,1,14) AS com_excerpt</span><br><span class="line"></span><br><span class="line">FROM $wpdb-&gt;comments</span><br><span class="line"></span><br><span class="line">LEFT OUTER JOIN $wpdb-&gt;posts ON ($wpdb-&gt;comments.comment_post_ID =</span><br><span class="line"></span><br><span class="line">$wpdb-&gt;posts.ID)</span><br><span class="line"></span><br><span class="line">WHERE comment_approved = ’1′ AND comment_type = ” AND</span><br><span class="line"></span><br><span class="line">post_password = ”</span><br><span class="line"></span><br><span class="line">ORDER BY comment_date_gmt DESC</span><br><span class="line"></span><br><span class="line">LIMIT 10″;</span><br><span class="line"></span><br><span class="line">$comments = $wpdb-&gt;get_results($sql);</span><br><span class="line"></span><br><span class="line">$output = $pre_HTML;</span><br><span class="line"></span><br><span class="line">foreach ($comments as $comment) &#123;</span><br><span class="line"></span><br><span class="line">$output .= “\n&lt;li&gt;”.strip_tags($comment-&gt;comment_author)</span><br><span class="line"></span><br><span class="line">.”:” . ” &lt;a href=\”&quot; . get_permalink($comment-&gt;ID) .</span><br><span class="line"></span><br><span class="line">“#comment-” . $comment-&gt;comment_ID . “\” title=\”on ” .</span><br><span class="line"></span><br><span class="line">$comment-&gt;post_title . “\”&gt;” . strip_tags($comment-&gt;com_excerpt)</span><br><span class="line"></span><br><span class="line">.”&lt;/a&gt;&lt;/li&gt;”;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$output .= $post_HTML;</span><br><span class="line"></span><br><span class="line">echo $output;?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="wordpress调用含gravatar头像的评论输出"><a href="#wordpress调用含gravatar头像的评论输出" class="headerlink" title="wordpress调用含gravatar头像的评论输出"></a>wordpress调用含gravatar头像的评论输出</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">global $wpdb;</span><br><span class="line"></span><br><span class="line">$sql = “SELECT DISTINCT ID, post_title, post_password, comment_ID, comment_post_ID, comment_author, comment_date_gmt, comment_approved,comment_author_email, comment_type,comment_author_url, SUBSTRING(comment_content,1,10) AS com_excerpt FROM $wpdb-&gt;comments LEFT OUTER JOIN $wpdb-&gt;posts ON ($wpdb-&gt;comments.comment_post_ID = $wpdb-&gt;posts.ID) WHERE comment_approved = ’1′ AND comment_type = ” AND comment_author != ‘郑 永’ AND post_password = ” ORDER BY comment_date_gmt DESC LIMIT 10″;</span><br><span class="line"></span><br><span class="line">$comments = $wpdb-&gt;get_results($sql);</span><br><span class="line"></span><br><span class="line">$output = $pre_HTML;</span><br><span class="line"></span><br><span class="line">foreach ($comments as $comment) &#123;</span><br><span class="line"></span><br><span class="line">$output .= “\n&lt;li&gt;”.get_avatar(get_comment_author_email(‘comment_author_email’), 18). ” &lt;a href=\”&quot; . get_permalink($comment-&gt;ID) . “#comment-” . $comment-&gt;comment_ID . “\” title=\”&quot; . $comment-&gt;post_title . ” 上的评论\”&gt;”. strip_tags($comment-&gt;comment_author) .”： “. strip_tags($comment-&gt;com_excerpt) .”&lt;/a&gt;&lt;/li&gt;”;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$output .= $post_HTML;</span><br><span class="line"></span><br><span class="line">$output = convert_smilies($output);</span><br><span class="line"></span><br><span class="line">echo $output;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>上面代码把comment_author的值改成你的ID，18是头像大小，10是评论数量。</p>
<h3 id="wordpress调用网站统计大全"><a href="#wordpress调用网站统计大全" class="headerlink" title="wordpress调用网站统计大全"></a>wordpress调用网站统计大全</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">1、日志总数：</span><br><span class="line"></span><br><span class="line">&lt;?php $count_posts = wp_count_posts(); echo $published_posts = $count_posts-&gt;publish;?&gt;</span><br><span class="line"></span><br><span class="line">2、草稿数目：</span><br><span class="line"></span><br><span class="line">&lt;?php $count_posts = wp_count_posts(); echo $draft_posts = $count_posts-&gt;draft; ?&gt;</span><br><span class="line"></span><br><span class="line">3、评论总数：</span><br><span class="line"></span><br><span class="line">&lt;?php echo $wpdb-&gt;get_var(“SELECT COUNT(*) FROM $wpdb-&gt;comments”);?&gt;</span><br><span class="line"></span><br><span class="line">4、成立时间：</span><br><span class="line"></span><br><span class="line">&lt;?php echo floor((time()-strtotime(“2008-8-18″))/86400); ?&gt;</span><br><span class="line"></span><br><span class="line">5、标签总数：</span><br><span class="line"></span><br><span class="line">&lt;?php echo $count_tags = wp_count_terms(‘post_tag’); ?&gt;</span><br><span class="line"></span><br><span class="line">6、页面总数：</span><br><span class="line"></span><br><span class="line">&lt;?php $count_pages = wp_count_posts(‘page’); echo $page_posts = $count_pages-&gt;publish; ?&gt;</span><br><span class="line"></span><br><span class="line">7、分类总数：</span><br><span class="line"></span><br><span class="line">&lt;?php echo $count_categories = wp_count_terms(‘category’); ?&gt;</span><br><span class="line"></span><br><span class="line">8、链接总数：</span><br><span class="line"></span><br><span class="line">&lt;?php $link = $wpdb-&gt;get_var(“SELECT COUNT(*) FROM $wpdb-&gt;links WHERE link_visible = ‘Y’”); echo $link; ?&gt;</span><br><span class="line"></span><br><span class="line">9、用户总数：</span><br><span class="line"></span><br><span class="line">&lt;?php $users = $wpdb-&gt;get_var(“SELECT COUNT(ID) FROM $wpdb-&gt;users”); echo $users; ?&gt;</span><br><span class="line"></span><br><span class="line">10、最后更新：</span><br><span class="line"></span><br><span class="line">&lt;?php $last = $wpdb-&gt;get_results(“SELECT MAX(post_modified) AS MAX_m FROM $wpdb-&gt;posts WHERE (post_type = ‘post’ OR post_type = ‘page’) AND (post_status = ‘publish’ OR post_status = ‘private’)”);$last = date(‘Y-n-j’, strtotime($last[0]-&gt;MAX_m));echo $last; ?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="wordpress判断语句"><a href="#wordpress判断语句" class="headerlink" title="wordpress判断语句"></a>wordpress判断语句</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">is_single()</span><br><span class="line"></span><br><span class="line">判断是否是具体文章的页面</span><br><span class="line"></span><br><span class="line">is_single(’2′)</span><br><span class="line"></span><br><span class="line">判断是否是具体文章（id=2）的页面</span><br><span class="line"></span><br><span class="line">is_single(’Beef Stew’)</span><br><span class="line"></span><br><span class="line">判断是否是具体文章（标题判断）的页面</span><br><span class="line"></span><br><span class="line">is_single(’beef-stew’)</span><br><span class="line"></span><br><span class="line">判断是否是具体文章（slug判断）的页面</span><br><span class="line"></span><br><span class="line">comments_open()</span><br><span class="line"></span><br><span class="line">是否留言开启</span><br><span class="line"></span><br><span class="line">pings_open()</span><br><span class="line"></span><br><span class="line">是否开启ping</span><br><span class="line"></span><br><span class="line">is_page()</span><br><span class="line"></span><br><span class="line">是否是页面</span><br><span class="line"></span><br><span class="line">is_page(’42′)</span><br><span class="line"></span><br><span class="line">id判断，即是否是id为42的页面</span><br><span class="line"></span><br><span class="line">is_page(’About Me’)</span><br><span class="line"></span><br><span class="line">判断标题</span><br><span class="line"></span><br><span class="line">is_page(’about-me’)</span><br><span class="line"></span><br><span class="line">slug判断</span><br><span class="line"></span><br><span class="line">is_category()</span><br><span class="line"></span><br><span class="line">是否是分类</span><br><span class="line"></span><br><span class="line">is_category(’6′)</span><br><span class="line"></span><br><span class="line">id判断，即是否是id为6的分类</span><br><span class="line"></span><br><span class="line">is_category(’Cheeses’)</span><br><span class="line"></span><br><span class="line">分类title判断</span><br><span class="line"></span><br><span class="line">is_category(’cheeses’)</span><br><span class="line"></span><br><span class="line">分类 slug判断</span><br><span class="line"></span><br><span class="line">in_category(’5′)</span><br><span class="line"></span><br><span class="line">判断当前的文章是否属于分类5</span><br><span class="line"></span><br><span class="line">is_author()</span><br><span class="line"></span><br><span class="line">将所有的作者的页面显示出来</span><br><span class="line"></span><br><span class="line">is_author(’1337′)</span><br><span class="line"></span><br><span class="line">显示author number为1337的页面</span><br><span class="line"></span><br><span class="line">is_author(’Elite Hacker’)</span><br><span class="line"></span><br><span class="line">通过昵称来显示当前作者的页面</span><br><span class="line"></span><br><span class="line">is_author(’elite-hacker’)</span><br><span class="line"></span><br><span class="line">下面是通过不同的判断实现以年、月、日、时间等方式来显示归档</span><br><span class="line"></span><br><span class="line">is_date()</span><br><span class="line"></span><br><span class="line">is_year()</span><br><span class="line"></span><br><span class="line">is_month()</span><br><span class="line"></span><br><span class="line">is_day()</span><br><span class="line"></span><br><span class="line">is_time()</span><br><span class="line"></span><br><span class="line">判断当前是否是归档页面</span><br><span class="line"></span><br><span class="line">is_archive()</span><br><span class="line"></span><br><span class="line">判断是否是搜索</span><br><span class="line"></span><br><span class="line">is_search()</span><br><span class="line"></span><br><span class="line">判断页面是否404</span><br><span class="line"></span><br><span class="line">is_404()</span><br><span class="line"></span><br><span class="line">判断是否翻页，比如你当前的blog是http://domain.com 显示http://domain.com?paged=2的时候，这个判断将返 回真，通过这个函数可以配合is_home来控制某些只能在首页显示的界面，</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line"></span><br><span class="line">&lt;?php if(is_single()):?&gt;</span><br><span class="line"></span><br><span class="line">//这里写你想显示的内容，包括函数</span><br><span class="line"></span><br><span class="line">&lt;?php endif;?&gt;</span><br><span class="line"></span><br><span class="line">或者：</span><br><span class="line"></span><br><span class="line">&lt;?php if(is_home() &amp;&amp; !is_paged() ):?&gt;</span><br><span class="line"></span><br><span class="line">//这里写你想显示的内容，包括函数</span><br><span class="line"></span><br><span class="line">&lt;?php endif;?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="wordpress-非插件调用评论表情"><a href="#wordpress-非插件调用评论表情" class="headerlink" title="wordpress 非插件调用评论表情"></a>wordpress 非插件调用评论表情</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;!–smilies–&gt;</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">function wp_smilies() &#123;</span><br><span class="line"></span><br><span class="line">global $wpsmiliestrans;</span><br><span class="line"></span><br><span class="line">if ( !get_option(‘use_smilies’) or (empty($wpsmiliestrans))) return;</span><br><span class="line"></span><br><span class="line">$smilies = array_unique($wpsmiliestrans);</span><br><span class="line"></span><br><span class="line">$link=”;</span><br><span class="line"></span><br><span class="line">foreach ($smilies as $key =&gt; $smile) &#123;</span><br><span class="line"></span><br><span class="line">$file = get_bloginfo(‘wpurl’).’/wp-includes/images/smilies/’.$smile;</span><br><span class="line"></span><br><span class="line">$value = ” “.$key.” “;</span><br><span class="line"></span><br><span class="line">$img = “&lt;img src=\”&#123;$file&#125;\” alt=\”&#123;$smile&#125;\” /&gt;”;</span><br><span class="line"></span><br><span class="line">$imglink = htmlspecialchars($img);</span><br><span class="line"></span><br><span class="line">$link .= “&lt;a href=\”#commentform\” title=\”&#123;$smile&#125;\” onclick=\”document.getElementById(‘comment’).value += ‘&#123;$value&#125;’\”&gt;&#123;$img&#125;&lt;/a&gt;&amp;nbsp;”;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echo ‘&lt;div&gt;’.$link.’&lt;/div&gt;’;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php wp_smilies();?&gt;</span><br><span class="line"></span><br><span class="line">&lt;!–smilies—&gt;</span><br></pre></td></tr></table></figure>
<p>将以上代码复制到 comments.php 中合适的位置：</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/01/04/wordpress%E8%AA%BF%E7%94%A8%E5%87%BD%E6%95%B8%E5%A4%A7%E5%85%A8/" data-id="clchb8h1x0009m1s6bs5zhcm7" data-title="wordpress調用函數大全" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2022/12/30/HTML%E7%B3%BB%E5%88%97%E5%AD%B8%E7%BF%92%E5%9B%9B-HTML%E5%85%83%E7%B4%A0/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">HTML系列學習四-HTML元素</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/WordPress/">WordPress</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%B8%E7%BF%92%E8%A8%88%E5%8A%83%E8%88%87%E7%B8%BD%E7%B5%90/">學習計劃與總結</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/01/04/wordpress%E8%AA%BF%E7%94%A8%E5%87%BD%E6%95%B8%E5%A4%A7%E5%85%A8/">wordpress調用函數大全</a>
          </li>
        
          <li>
            <a href="/2022/12/30/HTML%E7%B3%BB%E5%88%97%E5%AD%B8%E7%BF%92%E5%9B%9B-HTML%E5%85%83%E7%B4%A0/">HTML系列學習四-HTML元素</a>
          </li>
        
          <li>
            <a href="/2022/12/30/HTML%E7%B3%BB%E5%88%97%E5%AD%B8%E7%BF%92%E4%B8%89-%E5%9F%BA%E6%9C%AC%E7%9A%84HTML%E6%A8%99%E7%B1%A4/">HTML系列學習三,基本的HTML標籤</a>
          </li>
        
          <li>
            <a href="/2022/12/30/HTML%E7%B3%BB%E5%88%97%E5%AD%B8%E7%BF%92%E4%BA%8C-HTML%E7%B7%A8%E8%BC%AF%E5%99%A8/">HTML系列學習二,HTML編輯器</a>
          </li>
        
          <li>
            <a href="/2022/12/30/HTML%E7%B3%BB%E5%88%97%E5%AD%B8%E7%BF%92%E4%B8%80/">HTML系列學習一</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 jsc<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>